
## Installation

```bash
$ npm install
```

## Running the app (without docker)

### Migrations
Make sure you have a PostgreSQL server available and set the `DATABASE_URL` environment variable to point to that Postgres instance, like:

```bash
$ cd server/src/
# run migrations (using [knex-migrate](https://github.com/sheerun/knex-migrate))
$ export DATABASE_URL=postgres://admin:5UPP3rSecr3tPAssword@localhost:54320/thenurse && knex-migrate up
```

Also, there's an API endpoint that runs the migrations once the app is started:
`GET http://localhost:8000/api/migrate`

```bash
# development
$ npm run start

# watch mode
$ npm run start:dev

# production mode
$ npm run start:prod
```

### GraphQL

The graphql schema is generated by merging on all the `*.graphql` files found throughout the modules. 
It is generated automatically when the app starts, or when running:

```bash
server $ node generate-typings.js
```


## Development workflow
If not specified otherwise, all the steps below are issued from the `server/` folder


### 1. Create a new migration
Migrations are used for handling database schema (create/update/delete tables, columns. Even adding some seed data one-time can be done with migrations).
Make sure you have the `DATABASE_URL` env variable configured to point to the postgres instance from docker

```bash
$knex --knexfile ./src/knexfile.js migrate:make add_heartbeats
```
### 2. Create a new nestjs module:

## Test

```bash
# unit tests
$ npm run test

# e2e tests
$ npm run test:e2e

# test coverage
$ npm run test:cov
```

## Support

Nest is an MIT-licensed open source project. It can grow thanks to the sponsors and support by the amazing backers. If you'd like to join them, please [read more here](https://docs.nestjs.com/support).


